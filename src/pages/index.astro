---
import Layout from "../layouts/Layout.astro";
const code = `
import { defineConfig } from 'astro/config';
import { astroPrerenderIntegration } from 'vite-plugin-astro-prerender';

export default defineConfig({
  integrations: [
    astroPrerenderIntegration({
      componentsDir: 'src/components/Lazy',
      outputDir: 'public/prerendered',
      renderer: 'parser'
    })
  ]
});
`;
---

<Layout>
	<main class="main-content">
		<!-- Hero Section -->
		<section class="hero">
			<div class="hero-background">
				<div class="orb orb-1"></div>
				<div class="orb orb-2"></div>
				<div class="orb orb-3"></div>
			</div>

			<div class="hero-content">
				<div class="badge-group">
					<span class="badge">‚ö° Astro Plugin</span>
					<span class="badge badge-secondary">v1.0.0-alpha</span>
				</div>

				<div class="alpha-alert">
					<span class="alert-icon">‚ö†Ô∏è</span>
					<p>
						This is an <strong>Alpha Release</strong>. APIs may
						change and some features might be unstable.
					</p>
				</div>

				<h1 class="hero-title">
					<span class="gradient-text"
						>vite-plugin-astro-prerender</span
					>
				</h1>
				<p class="hero-subtitle">
					Prerender components to static HTML for lightning-fast lazy
					loading
				</p>
				<p class="hero-description">
					Boost your Astro site's performance by prerendering
					below-the-fold components to static HTML fragments at build
					time. Tree-shaken Tailwind CSS included.
				</p>

				<div class="hero-cta">
					<a href="#installation" class="btn btn-primary">
						<span class="btn-icon">üì¶</span>
						Get Started
					</a>
					<a
						href="https://github.com/ishaanparlikar/vite-plugin-astro-prerender"
						class="btn btn-secondary"
						target="_blank"
					>
						<span class="btn-icon">‚≠ê</span>
						GitHub (Alpha)
					</a>
				</div>

				<div class="hero-stats">
					<div class="stat">
						<span class="stat-value">40%</span>
						<span class="stat-label">Faster LCP</span>
					</div>
					<div class="stat-divider"></div>
					<div class="stat">
						<span class="stat-value">0</span>
						<span class="stat-label">Runtime Deps</span>
					</div>
					<div class="stat-divider"></div>
					<div class="stat">
						<span class="stat-value">100%</span>
						<span class="stat-label">SSG Compatible</span>
					</div>
				</div>
			</div>
		</section>

		<!-- Features Section -->
		<section class="features-section" id="features">
			<div class="section-container">
				<div class="section-header">
					<span class="section-label">Features</span>
					<h2 class="section-title">
						Everything you need for lazy loading
					</h2>
				</div>

				<div class="features-grid">
					<article class="feature-card">
						<div class="feature-icon">üöÄ</div>
						<h3>Prerender at Build Time</h3>
						<p>
							Components are compiled to static HTML during the
							build process.
						</p>
					</article>

					<article class="feature-card">
						<div class="feature-icon">üéØ</div>
						<h3>Intersection Observer</h3>
						<p>
							HTML fragments are fetched only when they enter the
							viewport.
						</p>
					</article>

					<article class="feature-card">
						<div class="feature-icon">üé®</div>
						<h3>Tailwind Tree-shaking</h3>
						<p>
							Optional CSS generation extracts only used classes.
						</p>
					</article>

					<article class="feature-card">
						<div class="feature-icon">‚ö°</div>
						<h3>Smart Caching</h3>
						<p>Built-in file hashing skips unchanged components.</p>
					</article>

					<article class="feature-card">
						<div class="feature-icon">üîß</div>
						<h3>Two Renderers</h3>
						<p>Choose between Parser or Container API renderers.</p>
					</article>

					<article class="feature-card">
						<div class="feature-icon">üì°</div>
						<h3>Hot Reload</h3>
						<p>
							Changes are watched and automatically reprocessed.
						</p>
					</article>
				</div>
			</div>
		</section>

		<!-- Installation Section -->
		<section class="installation-section" id="installation">
			<div class="section-container">
				<div class="section-header">
					<span class="section-label">Installation</span>
					<h2 class="section-title">Get started in minutes</h2>
				</div>

				<div class="install-tabs-container">
					<div class="install-tabs">
						<button class="install-tab active" data-tab="npm"
							>npm</button
						>
						<button class="install-tab" data-tab="pnpm">pnpm</button
						>
						<button class="install-tab" data-tab="bun">bun</button>
					</div>

					<div class="install-content active" id="npm-content">
						<pre
							is:raw><code>npm install vite-plugin-astro-prerender</code></pre>
					</div>
					<div class="install-content" id="pnpm-content">
						<pre
							is:raw><code>pnpm add vite-plugin-astro-prerender</code></pre>
					</div>
					<div class="install-content" id="bun-content">
						<pre
							is:raw><code>bun add vite-plugin-astro-prerender</code></pre>
					</div>
				</div>

				<div class="usage-guide">
					<h3><span class="step-indicator">1</span> Add to config</h3>
					<p>
						Add the integration to your <code>astro.config.mjs</code
						>:
					</p>

					<pre><code class="language-javascript">{code}</code></pre>
				</div>

				<div class="usage-guide">
					<h3>
						<span class="step-indicator">2</span> Create Lazy Components
					</h3>
					<p>
						Create your component in <code
							>src/components/Lazy/MyComponent.astro</code
						>:
					</p>
					<pre
						is:raw><code class="language-astro">---
// Your component logic
---
<section class="p-4 bg-gray-100 rounded-lg">
  <h2>I am lazy loaded!</h2>
  <p>This HTML was generated at build time.</p>
</section></code></pre>
				</div>

				<div class="usage-guide">
					<h3>
						<span class="step-indicator">3</span> Client-side Loading
					</h3>
					<p>Use the loader to fetch and inject content:</p>
					<pre
						is:raw><code class="language-typescript">import { createLazyLoader } from "vite-plugin-astro-prerender/client";

const loader = createLazyLoader({
  baseUrl: "/prerendered",
});

// Load when element enters viewport
loader.observeAndLoad(
  "MyComponent", 
  "#container-id", 
  { rootMargin: "200px" }
);</code></pre>
				</div>
			</div>
		</section>

		<!-- Demo Section -->
		<section class="demo-section" id="demo">
			<div class="section-container">
				<div class="section-header">
					<span class="section-label">Live Demo</span>
					<h2 class="section-title">See it in action</h2>
					<p class="demo-text">
						The sections below are lazy-loaded. Watch the console
						for debug logs!
					</p>
				</div>
			</div>
		</section>

		<!-- Lazy-loaded sections -->
		<div id="testimonials-container" class="lazy-placeholder">
			<div class="loading-skeleton">
				<div class="skeleton-pulse"></div>
				<span>Loading testimonials...</span>
			</div>
		</div>

		<div id="footer-container" class="lazy-placeholder">
			<div class="loading-skeleton">
				<div class="skeleton-pulse"></div>
				<span>Loading footer...</span>
			</div>
		</div>
	</main>
</Layout>

<script>
	import { createLazyLoader } from "vite-plugin-astro-prerender/client";

	const loader = createLazyLoader({
		baseUrl: "/prerendered",
		debug: true,
		onLoad: (name: string, { duration }: { duration: number }) => {
			console.log(`‚úÖ Loaded "${name}" in ${duration.toFixed(2)}ms`);
		},
		onError: (name: string, error: Error) => {
			console.error(`‚ùå Failed to load "${name}":`, error);
		},
	});

	loader.observeAndLoad("LazyTestimonials", "#testimonials-container", {
		rootMargin: "200px",
	});

	loader.observeAndLoad("LazyFooter", "#footer-container", {
		rootMargin: "100px",
	});
</script>

<script>
	const tabs = document.querySelectorAll<HTMLElement>(".install-tab");
	const contents = document.querySelectorAll(".install-content");

	tabs.forEach((tab) => {
		tab.addEventListener("click", () => {
			const target = tab.dataset.tab;

			// Update tabs
			tabs.forEach((t) => t.classList.remove("active"));
			tab.classList.add("active");

			// Update content
			contents.forEach((c) => {
				c.classList.remove("active");
				if (c.id === `${target}-content`) {
					c.classList.add("active");
				}
			});
		});
	});
</script>

<style>
	.install-tabs-container {
		max-width: 800px;
		margin: 0 auto 4rem;
	}

	.install-tabs {
		display: flex;
		gap: 0.5rem;
		margin-bottom: 1rem;
		border-bottom: 1px solid rgba(255, 255, 255, 0.1);
		padding-bottom: 1rem;
	}

	.alpha-alert {
		background: rgba(234, 179, 8, 0.1);
		border: 1px solid rgba(234, 179, 8, 0.2);
		color: #fef08a;
		padding: 0.75rem 1.5rem;
		border-radius: 1rem;
		display: inline-flex;
		align-items: center;
		gap: 0.75rem;
		margin-bottom: 2rem;
		font-size: 0.9rem;
	}

	.alert-icon {
		font-size: 1.25rem;
	}

	.install-tab {
		background: transparent;
		border: 1px solid transparent;
		color: #888;
		padding: 0.5rem 1rem;
		border-radius: 0.5rem;
		cursor: pointer;
		font-weight: 600;
		transition: all 0.2s;
	}

	.install-tab:hover {
		color: #fff;
		background: rgba(255, 255, 255, 0.05);
	}

	.install-tab.active {
		color: #fff;
		background: rgba(102, 126, 234, 0.1);
		border-color: rgba(102, 126, 234, 0.3);
	}

	.install-content {
		display: none;
	}

	.install-content.active {
		display: block;
	}

	.install-content pre {
		background: #0f0f1a;
		border: 1px solid rgba(255, 255, 255, 0.08);
		border-radius: 0.75rem;
		padding: 1.25rem;
		font-family: "Fira Code", monospace;
		color: #a5b4fc;
		margin: 0;
	}

	.usage-guide {
		max-width: 800px;
		margin: 3rem auto;
		background: rgba(255, 255, 255, 0.02);
		border: 1px solid rgba(255, 255, 255, 0.06);
		border-radius: 1rem;
		padding: 2rem;
	}

	.usage-guide h3 {
		display: flex;
		align-items: center;
		gap: 1rem;
		font-size: 1.25rem;
		margin: 0 0 1rem;
		color: #fff;
	}

	.step-indicator {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 28px;
		height: 28px;
		background: rgba(102, 126, 234, 0.2);
		color: #8b9cff;
		border-radius: 50%;
		font-size: 0.9rem;
		font-weight: 700;
	}

	.usage-guide p {
		color: #888;
		margin-bottom: 1.5rem;
		line-height: 1.6;
	}

	.usage-guide pre {
		background: #0f0f1a;
		border: 1px solid rgba(255, 255, 255, 0.08);
		border-radius: 0.75rem;
		padding: 1rem;
		overflow-x: auto;
	}

	.usage-guide code {
		font-family: "Fira Code", monospace;
		font-size: 0.9rem;
		color: #e2e8f0;
	}
	.main-content {
		font-family:
			"Inter",
			-apple-system,
			BlinkMacSystemFont,
			"Segoe UI",
			sans-serif;
		background: #0a0a14;
		color: #fff;
	}

	.section-container {
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 2rem;
	}

	.section-header {
		text-align: center;
		max-width: 700px;
		margin: 0 auto 4rem;
	}

	.section-label {
		display: inline-block;
		background: linear-gradient(
			135deg,
			rgba(102, 126, 234, 0.2) 0%,
			rgba(118, 75, 162, 0.2) 100%
		);
		border: 1px solid rgba(102, 126, 234, 0.3);
		color: #8b9cff;
		padding: 0.5rem 1.25rem;
		border-radius: 2rem;
		font-size: 0.8rem;
		font-weight: 600;
		text-transform: uppercase;
		letter-spacing: 0.1em;
		margin-bottom: 1.5rem;
	}

	.section-title {
		font-size: 3rem;
		font-weight: 800;
		margin: 0 0 1rem;
		line-height: 1.2;
	}

	/* Hero */
	.hero {
		position: relative;
		min-height: 100vh;
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 2rem;
		overflow: hidden;
	}

	.hero-background {
		position: absolute;
		inset: 0;
		overflow: hidden;
	}

	.orb {
		position: absolute;
		border-radius: 50%;
		filter: blur(120px);
		animation: float 20s ease-in-out infinite;
	}

	.orb-1 {
		width: 600px;
		height: 600px;
		background: rgba(102, 126, 234, 0.35);
		top: -20%;
		right: -15%;
	}

	.orb-2 {
		width: 500px;
		height: 500px;
		background: rgba(118, 75, 162, 0.25);
		bottom: -20%;
		left: -10%;
		animation-delay: -7s;
	}

	.orb-3 {
		width: 350px;
		height: 350px;
		background: rgba(237, 100, 166, 0.2);
		top: 40%;
		left: 40%;
		animation-delay: -14s;
	}

	@keyframes float {
		0%,
		100% {
			transform: translate(0, 0) scale(1);
		}
		25% {
			transform: translate(30px, -30px) scale(1.05);
		}
		50% {
			transform: translate(-20px, 20px) scale(0.95);
		}
		75% {
			transform: translate(-30px, -20px) scale(1.02);
		}
	}

	.hero-content {
		position: relative;
		z-index: 1;
		text-align: center;
		max-width: 900px;
	}

	.badge-group {
		display: flex;
		justify-content: center;
		gap: 0.75rem;
		margin-bottom: 2rem;
		flex-wrap: wrap;
	}

	.badge {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		background: rgba(102, 126, 234, 0.15);
		border: 1px solid rgba(102, 126, 234, 0.3);
		padding: 0.5rem 1.25rem;
		border-radius: 2rem;
		font-size: 0.875rem;
		font-weight: 600;
		color: #8b9cff;
	}

	.badge-secondary {
		background: rgba(118, 75, 162, 0.15);
		border-color: rgba(118, 75, 162, 0.3);
		color: #c084fc;
	}

	.hero-title {
		font-size: 3.5rem;
		font-weight: 800;
		line-height: 1.1;
		margin: 0 0 1rem;
	}

	.gradient-text {
		background: linear-gradient(
			135deg,
			#667eea 0%,
			#764ba2 40%,
			#ed64a6 100%
		);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
	}

	.hero-subtitle {
		font-size: 1.75rem;
		font-weight: 600;
		color: #c8c8d8;
		margin: 0 0 1rem;
	}

	.hero-description {
		font-size: 1.125rem;
		color: #888;
		line-height: 1.7;
		margin: 0 0 2.5rem;
		max-width: 700px;
		margin-left: auto;
		margin-right: auto;
	}

	.hero-cta {
		display: flex;
		justify-content: center;
		gap: 1rem;
		flex-wrap: wrap;
		margin-bottom: 3rem;
	}

	.btn {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		padding: 0.875rem 1.75rem;
		border-radius: 0.75rem;
		font-size: 1rem;
		font-weight: 600;
		text-decoration: none;
		transition: all 0.2s ease;
	}

	.btn-primary {
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		color: white;
		box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
	}

	.btn-primary:hover {
		transform: translateY(-2px);
		box-shadow: 0 6px 25px rgba(102, 126, 234, 0.5);
	}

	.btn-secondary {
		background: rgba(255, 255, 255, 0.05);
		color: #c8c8d8;
		border: 1px solid rgba(255, 255, 255, 0.15);
	}

	.btn-secondary:hover {
		background: rgba(255, 255, 255, 0.1);
		border-color: rgba(255, 255, 255, 0.25);
	}

	.hero-stats {
		display: flex;
		justify-content: center;
		align-items: center;
		gap: 2rem;
		flex-wrap: wrap;
	}

	.stat {
		text-align: center;
	}

	.stat-value {
		display: block;
		font-size: 2rem;
		font-weight: 800;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
	}

	.stat-label {
		font-size: 0.875rem;
		color: #666;
	}

	.stat-divider {
		width: 1px;
		height: 40px;
		background: rgba(255, 255, 255, 0.1);
	}

	/* Features */
	.features-section {
		padding: 8rem 0;
		background: linear-gradient(180deg, #0a0a14 0%, #0d0d1a 100%);
	}

	.features-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
		gap: 1.5rem;
	}

	.feature-card {
		background: rgba(255, 255, 255, 0.02);
		border: 1px solid rgba(255, 255, 255, 0.06);
		border-radius: 1.25rem;
		padding: 2rem;
		transition: all 0.3s ease;
	}

	.feature-card:hover {
		background: rgba(255, 255, 255, 0.04);
		border-color: rgba(102, 126, 234, 0.2);
		transform: translateY(-4px);
	}

	.feature-icon {
		font-size: 2.5rem;
		margin-bottom: 1rem;
	}

	.feature-card h3 {
		font-size: 1.25rem;
		font-weight: 700;
		margin: 0 0 0.75rem;
		color: #fff;
	}

	.feature-card p {
		font-size: 0.95rem;
		color: #888;
		line-height: 1.7;
		margin: 0;
	}

	/* Installation */
	.installation-section {
		padding: 8rem 0;
		background: #0a0a14;
	}

	.install-steps {
		display: flex;
		flex-direction: column;
		gap: 2rem;
		max-width: 800px;
		margin: 0 auto;
	}

	.install-step {
		background: rgba(255, 255, 255, 0.02);
		border: 1px solid rgba(255, 255, 255, 0.06);
		border-radius: 1rem;
		padding: 2rem;
	}

	.step-number {
		width: 32px;
		height: 32px;
		border-radius: 50%;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		color: white;
		font-weight: 700;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		margin-bottom: 1rem;
	}

	.install-step h3 {
		margin: 0 0 1rem;
		font-size: 1.1rem;
	}

	.install-step pre {
		background: #0f0f1a;
		border: 1px solid rgba(255, 255, 255, 0.08);
		border-radius: 0.75rem;
		padding: 1rem;
		overflow-x: auto;
		margin: 0;
	}

	.install-step code {
		font-family: "Fira Code", monospace;
		font-size: 0.85rem;
		color: #a5b4fc;
		line-height: 1.7;
	}

	/* Demo */
	.demo-section {
		padding: 6rem 0 4rem;
		background: linear-gradient(180deg, #0d0d1a 0%, #0a0a14 100%);
	}

	.demo-text {
		color: #888;
		font-size: 1.125rem;
		margin: 1rem 0 0;
	}

	/* Lazy placeholders */
	.lazy-placeholder {
		min-height: 300px;
		display: flex;
		align-items: center;
		justify-content: center;
		background: linear-gradient(180deg, #0a0a14 0%, #0f0f1a 100%);
		border-top: 1px solid rgba(255, 255, 255, 0.05);
	}

	.loading-skeleton {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1rem;
		color: #555;
		font-size: 0.9rem;
	}

	.skeleton-pulse {
		width: 48px;
		height: 48px;
		border-radius: 50%;
		background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
		animation: pulse 1.5s ease-in-out infinite;
	}

	@keyframes pulse {
		0%,
		100% {
			opacity: 1;
			transform: scale(1);
		}
		50% {
			opacity: 0.5;
			transform: scale(0.9);
		}
	}

	@media (max-width: 768px) {
		.hero-title {
			font-size: 2.5rem;
		}
		.hero-subtitle {
			font-size: 1.25rem;
		}
		.section-title {
			font-size: 2rem;
		}
	}
</style>
